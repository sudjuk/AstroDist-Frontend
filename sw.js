importScripts("https://storage.googleapis.com/workbox-cdn/releases/7.0.0/workbox-sw.js");self.addEventListener("fetch",o=>{const e=new URL(o.request.url);(e.pathname.includes("/api/")||e.pathname.includes("/order/")||e.pathname.includes("/static/")||e.pathname.includes("/pictures/"))&&(console.log("Service Worker intercepting:",e.pathname),o.respondWith((async()=>{let s=e.pathname;s.startsWith("/AstroDist-Frontend")&&(s=s.replace("/AstroDist-Frontend",""));const t=`https://localhost:8443${s}${e.search}`;console.log("Proxying to:",t);const a={method:o.request.method,headers:{},mode:"cors",credentials:"omit"};o.request.headers.forEach((r,n)=>{const c=n.toLowerCase();["host","referer","origin"].includes(c)||(a.headers[n]=r)}),o.request.body!==null&&(a.body=await o.request.clone().arrayBuffer());try{const r=await fetch(t,a);return console.log("Proxy response:",r.status),r}catch(r){return console.error("Service Worker proxy error:",r,"URL:",t),new Response(JSON.stringify({error:"Backend unavailable",message:r.message}),{status:503,headers:{"Content-Type":"application/json"}})}})()))});workbox.precaching.precacheAndRoute([{"revision":null,"url":"assets/index-D99ButM9.css"},{"revision":null,"url":"assets/index-DUqXjRX_.js"},{"revision":"e3e099a33e8a2866d2f8123ca3315c0d","url":"asteroids.png"},{"revision":"0ae9509fc4d56a4db7b1f1b621553e81","url":"corzina.svg"},{"revision":"5d19bf19bba9274d4a0238aa5eb76184","url":"earth.png"},{"revision":"9d696fb37ac77142902a2b73e98c4997","url":"icon.svg"},{"revision":"86944fd7d6034484015dc4127f55e8d0","url":"index.html"},{"revision":"a0145d2942283915d7d842a793cb5e1d","url":"manifest.webmanifest"},{"revision":"72f590a17ac00bab178fb2bc76cfa7c9","url":"registerSW.js"},{"revision":"9d696fb37ac77142902a2b73e98c4997","url":"icon.svg"},{"revision":"a0145d2942283915d7d842a793cb5e1d","url":"manifest.webmanifest"}]||[]);
